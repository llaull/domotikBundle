{% extends 'FrondOfficeBundle:MetronicWebApp:body-page-content.html.twig' %}

{% block moreCss %}{% endblock moreCss %}

{% block moreJs %}
    {% javascripts
    '@BackOfficeBundle/Resources/public/assets/global/plugins/amcharts/amcharts/amcharts.js'
    '@BackOfficeBundle/Resources/public/assets/global/plugins/amcharts/amcharts/plugins/dataloader/dataloader.min.js'
    '@BackOfficeBundle/Resources/public/assets/global/plugins/amcharts/amcharts/serial.js'
    '@BackOfficeBundle/Resources/public/assets/global/plugins/amcharts/amstockcharts/amstock.js'
    '@BackOfficeBundle/Resources/public/assets/global/plugins/amcharts/amcharts/themes/patterns.js'
    '@BackOfficeBundle/Resources/public/assets/global/plugins/amcharts/amstockcharts/amstock.js'
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}

    <!-- BEGIN PAGE LEVEL PLUGINS -->
    {#<script src="../assets/global/plugins/amcharts/amcharts/pie.js" type="text/javascript"></script>#}
    {#<script src="../assets/global/plugins/amcharts/amcharts/radar.js" type="text/javascript"></script>#}
    {#<script src="../assets/global/plugins/amcharts/amcharts/themes/light.js" type="text/javascript"></script>#}
    {#<script src="../assets/global/plugins/amcharts/amcharts/themes/patterns.js" type="text/javascript"></script>#}
    {#<script src="../assets/global/plugins/amcharts/amcharts/themes/chalk.js" type="text/javascript"></script>#}
    {#<script src="../assets/global/plugins/amcharts/amstockcharts/amstock.js" type="text/javascript"></script>#}

<script type="text/javascript">
    $(document).ready(function () {

        var chart = AmCharts.makeChart("chartdiv",
                {
                    "type": "serial",
                    "theme": "dark",
                    "dataLoader":
                    {
                        "url": "{{ path('domobox_log_graph') }}",
                        "showErrors": true,
                        "complete": function(chart)
                        {
                            console.log("Loading complete");
                        },
                        "load": function(options, chart)
                        {
                            console.log("File loaded: ", options.url);
                        },
                        "error": function(options, chart)
                        {
                            console.log("Error occured loading file: ", options.url);
                        }
                    },
                    "categoryField": "year",
                    "startDuration": 1,
//                    "rotate": true,
                    "synchronizeGrid":true,
                    "categoryAxis":
                    {
                        "gridPosition": "start"
                    },
                    "valueAxes": [
                        {
                            "position": "top",
                            "title": "Million USD",
                            "minorGridEnabled": true
                        }],
                    "graphs": [
                        {
                            "type": "column",
                            "title": "Income",
                            "valueField": "income",
                            "fillAlphas": 1,
                            "balloonText": "<span style='font-size:13px;'>[[title]] in [[category]]:<b>[[value]]</b></span>"
                        },
                        {
                            "type": "line",
                            "title": "Expenses",
                            "valueField": "expenses",
                            "lineThickness": 2,
                            "bullet": "round",
                            "balloonText": "<span style='font-size:13px;'>[[title]] in [[category]]:<b>[[value]]</b></span>"
                        }],
                    "chartScrollbar": {},
                    "chartCursor": {
                        "cursorPosition": "mouse"
                    },
                    "legend":
                    {
                        "useGraphSettings": true
                    },
                    "creditsPosition": "top-right",
                    "responsive":
                    {
                        "enabled": true
                    }
                });

        function reloadData()
        {
            chart.dataLoader.loadData();
        }


    });
</script>
{% endblock moreJs %}

{% set title_page = 'les graphiques' %}

{% block content_txt %}
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN CHART PORTLET-->
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="icon-bar-chart font-green-haze"></i>
                        <span class="caption-subject bold uppercase font-green-haze"> Line & Area</span>
                        <span class="caption-helper">with changing color</span>
                    </div>
                    <div class="tools">
                        <a href="javascript:;" class="collapse"> </a>
                        <a href="#portlet-config" data-toggle="modal" class="config"> </a>
                        <a href="javascript:;" class="reload"> </a>
                        <a href="javascript:;" class="fullscreen"> </a>
                        <a href="javascript:;" class="remove"> </a>
                    </div>
                </div>
                <div class="portlet-body">
                    <div id="chartdiv" class="chart" style="height: 400px;"> </div>
                </div>
            </div>
            <!-- END CHART PORTLET-->
        </div>
    </div>
{% endblock content_txt %}
